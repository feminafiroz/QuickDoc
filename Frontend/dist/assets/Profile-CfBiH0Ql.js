import{r as c,U as x,n as w,p as y,j as e,L as F}from"./index-FtoaIzxn.js";import{F as P}from"./Footer-DVhk8bu5.js";import{N as _}from"./navbar--kMTgj1R.js";import{b as S}from"./index-BRyxOzXY.js";import{G as R}from"./iconBase-CbxJS-00.js";import{a as N}from"./axiosService-Bk3JA0V8.js";import{s as f}from"./toaster-DOicKWBQ.js";import{u as k}from"./uploadImages-BoBihmdI.js";import"./index-Ch4SwBGa.js";import"./index-CrArK4pO.js";import"./logo-NL4NpGi6.js";import"./setnget-jfIHgayU.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";function D(r){return R({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 3a2 2 0 0 1 2-2h13.5a.5.5 0 0 1 0 1H15v2a1 1 0 0 1 1 1v8.5a1.5 1.5 0 0 1-1.5 1.5h-12A2.5 2.5 0 0 1 0 12.5zm1 1.732V12.5A1.5 1.5 0 0 0 2.5 14h12a.5.5 0 0 0 .5-.5V5H2a2 2 0 0 1-1-.268M1 3a1 1 0 0 0 1 1h12V2H2a1 1 0 0 0-1 1"},child:[]}]})(r)}const I=()=>{const[r,o]=c.useState(null),[d,h]=c.useState(null),[a,g]=c.useState({name:"",gender:"",phoneNumber:"",address:"",dateofbirth:"",marital_status:"single",bloodGroup:"",allergies:"",chronicConditions:"",emergencyContactName:"",emergencyContactRelationship:"",emergencyContactPhoneNumber:"",imageFile:null}),[b,j]=c.useState(null),[v,p]=c.useState(!1);return c.useEffect(()=>{N.get(x+"/profile").then(({data:i})=>{const{user:n}=i;o(n),g(t=>{var s,l;return{...t,name:(n==null?void 0:n.name)||"",gender:(n==null?void 0:n.gender)||"",phoneNumber:(n==null?void 0:n.phoneNumber)||"",address:(n==null?void 0:n.address)||"",dateofbirth:n!=null&&n.dateofbirth?new Date(n.dateofbirth).toISOString().split("T")[0]:"",marital_status:(n==null?void 0:n.marital_status)||"single",bloodGroup:(n==null?void 0:n.bloodGroup)||"",allergies:((s=n==null?void 0:n.allergies)==null?void 0:s.join(", "))||"",chronicConditions:((l=n==null?void 0:n.chronicConditions)==null?void 0:l.join(", "))||"",emergencyContactName:(n==null?void 0:n.emergencyContactName)||"",emergencyContactRelationship:(n==null?void 0:n.emergencyContactRelationship)||"",emergencyContactPhoneNumber:(n==null?void 0:n.emergencyContactPhoneNumber)||""}})}).catch(()=>f("Oops! Something went wrong","error"))},[]),{profile:r,formData:a,error:d,imagePreview:b,handleInputChange:i=>{const{name:n,value:t}=i.target;let s="";if(n==="imageFile"){const l=i.target,m=l.files&&l.files[0];if(m){const u=new FileReader;u.onloadend=()=>{j(u.result)},u.readAsDataURL(m),g(C=>({...C,imageFile:m}))}}else{if(n==="name")t.trim()?w.test(t)||(s="First letter must be capital and no leading or trailing space"):s="Name is required";else if(n==="age"){const l=parseInt(t,10);(isNaN(l)||l<0)&&(s="Age must be a positive number")}else if(n==="phoneNumber")t.trim()?y.test(t)||(s="Phone number must have 10 numbers"):s="Phone number is required";else if(n==="dateofbirth"){const l=new Date,m=new Date(t),u=l.getFullYear()-m.getFullYear();m>l?s="Date of birth cannot be in the future":u<18&&(s="User must be 18 years older")}else n==="emergencyContactPhoneNumber"&&(t.trim()?y.test(t)||(s="Phone number must have 10 numbers"):s="Phone number is required");g(l=>({...l,[n]:t}))}h(s)},handleSubmit:async i=>{if(i.preventDefault(),!d){p(!0);const n=await k(a.imageFile);N.patch(x+"/profile/edit",{name:a.name,gender:a.gender,phoneNumber:a.phoneNumber,address:a.address,dateofbirth:a.dateofbirth,marital_status:a.marital_status,bloodGroup:a.bloodGroup,allergies:a.allergies.split(", ").map(t=>t.trim()),chronicConditions:a.chronicConditions.split(", ").map(t=>t.trim()),emergencyContactName:a.emergencyContactName,emergencyContactRelationship:a.emergencyContactRelationship,emergencyContactPhoneNumber:a.emergencyContactPhoneNumber,profilePicture:n||(r==null?void 0:r.profilePicture)}).then(({data:t})=>{f(t.message),p(!1)}).catch(()=>{p(!1),f("Oops! Something went wrong while updating profile","error")})}},isSubmitting:v}},E="/assets/avatar-BTTAv4-T.jpeg",A=()=>{const{profile:r,formData:o,error:d,imagePreview:h,handleInputChange:a,handleSubmit:g,isSubmitting:b}=I();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-gray-100 min-h-screen",children:e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsx("h2",{className:"text-4xl font-bold text-center text-green-700 mb-6",children:"Profile"}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 w-3/4 mx-auto flex flex-col items-center",children:e.jsxs("form",{onSubmit:g,className:"w-full max-w-3xl",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("img",{src:h||(r==null?void 0:r.profilePicture)||E,alt:"Profile",className:"w-40 h-40 rounded-full mx-auto mb-4"}),e.jsxs("label",{htmlFor:"profile-image",className:"absolute bottom-0 right-0 transform translate-x-1/2 bg-green-700 text-white rounded-full p-2 cursor-pointer mr-10",children:[e.jsx("input",{type:"file",id:"profile-image",name:"imageFile",className:"hidden",onChange:a}),e.jsx(S,{className:"h-5 w-5"})]})]}),e.jsxs("div",{className:"mb-4 pt-5",children:[e.jsxs("div",{className:"pb-7",children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 font-semibold",children:"Name:"}),e.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:a,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-semibold",children:"Email:"}),e.jsx("input",{type:"email",id:"email",name:"email",value:(r==null?void 0:r.email)||"",onChange:a,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),e.jsxs("div",{className:"mb-4 lg:pt-20 lg:mt-7",children:[e.jsx("label",{htmlFor:"phone",className:"block text-gray-700 font-semibold",children:"Phone:"}),e.jsx("input",{type:"tel",id:"phone",name:"phoneNumber",value:o.phoneNumber||"",onChange:a,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"address",className:"block text-gray-700 font-semibold",children:"Address:"}),e.jsx("input",{type:"text",id:"address",name:"address",value:o.address||"",onChange:a,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"dob",className:"block text-gray-700 font-semibold",children:"DOB:"}),e.jsx("input",{type:"date",id:"dob",name:"dateofbirth",value:o.dateofbirth||"",onChange:a,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"gender",className:"block text-gray-700 font-semibold",children:"Gender:"}),e.jsxs("select",{id:"gender",name:"gender",value:o.gender||"",onChange:a,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"others",children:"Others"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"marital_status",className:"block text-gray-700 font-semibold",children:"Marital Status:"}),e.jsxs("select",{id:"marital_status",name:"marital_status",value:o.marital_status||"",onChange:a,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"single",children:"Single"}),e.jsx("option",{value:"married",children:"Married"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"allergies",className:"block text-gray-700 font-semibold",children:"Allergies:"}),e.jsx("input",{type:"text",id:"allergies",name:"allergies",value:o.allergies||"",onChange:a,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"chronic_conditions",className:"block text-gray-700 font-semibold",children:"Chronic Conditions:"}),e.jsx("input",{type:"text",id:"chronic_conditions",name:"chronicConditions",value:o.chronicConditions||"",onChange:a,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"emergency_contact_name",className:"block text-gray-700 font-semibold",children:"Emergency Contact Name:"}),e.jsx("input",{type:"text",id:"emergency_contact_name",name:"emergencyContactName",value:o.emergencyContactName||"",onChange:a,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"emergency_contact_relationship",className:"block text-gray-700 font-semibold",children:"Emergency Contact Relationship:"}),e.jsx("input",{type:"text",id:"emergency_contact_relationship",name:"emergencyContactRelationship",value:o.emergencyContactRelationship||"",onChange:a,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"emergency_contact_phone",className:"block text-gray-700 font-semibold",children:"Emergency Contact Phone:"}),e.jsx("input",{type:"text",id:"emergency_contact_phone",name:"emergencyContactPhoneNumber",value:o.emergencyContactPhoneNumber||"",onChange:a,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),d&&e.jsx("p",{className:"text-red-500 mb-4 text-center",children:d})," ",e.jsx("button",{type:"submit",className:"mt-6 w-full bg-green-700 text-white rounded-md py-2 hover:bg-green-600 transition duration-300 px-10",children:b?"Updating...":"Update Profile"})]})}),e.jsx(F,{to:"/user/wallet",className:"fixed bottom-8 right-8 bg-green-900 text-white rounded-full p-4 shadow-lg hover:bg-green-800",children:e.jsx(D,{className:"h-7 w-7"})})]})})})},X=()=>e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx(A,{}),e.jsx(P,{})]});export{X as default};
