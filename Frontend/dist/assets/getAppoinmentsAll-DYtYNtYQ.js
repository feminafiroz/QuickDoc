import{r,j as e,U as c}from"./index-C8FnT1Uh.js";import{N as g}from"./navbar-CRTHrb3s.js";import{a as u}from"./axiosService-DVz0kc08.js";import{C as D}from"./Calender-BYpXzjab.js";import{a as l}from"./axios-B6xwUs71.js";import"./logo-NL4NpGi6.js";import"./toaster-DqQ00yAR.js";import"./setnget-jfIHgayU.js";import"./index-VWaDGczM.js";const w=()=>{const[a,p]=r.useState([]),[d,m]=r.useState([]),[x,h]=r.useState({});r.useEffect(()=>{(async()=>{try{const s=await u.get(`${c}/allAppoinments`);p(s.data.bookings.bookingDetails)}catch(s){console.error("Error fetching appointments:",s)}})()},[]),r.useEffect(()=>{(async()=>{try{const f=(await l.get(`${c}/department/list`)).data.departments.reduce((n,i)=>(n[i._id]=i.departmentName,n),{}),y=(await l.get(`${c}/doctors`)).data.doctors.filter(n=>n.isApproved);h(f),m(y)}catch(s){console.error("Error fetching doctors or departments:",s)}})()},[]);const b=t=>{const s={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString(void 0,s)},j=t=>{const s=d.find(o=>o._id===t);return s?s.doctorName:"Unknown Doctor"},N=t=>{const s=d.find(o=>o._id===t);return s?x[s.department]:"Unknown Department"};return console.log(a),e.jsxs("div",{className:"container mx-auto px-8 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Appointments List"}),a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx("p",{className:"text-xl text-center mb-4",children:"You have no appointments booked."}),e.jsx("img",{src:D,alt:"calender pic",className:"mx-auto"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"w-full bg-gray-800 text-white",children:[e.jsx("th",{className:"py-2 px-4 border-b",children:"Patient Name"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Date"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Time Slot"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Doctor"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Fees"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Specialty"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Actions"})]})}),e.jsx("tbody",{children:a.map(t=>e.jsxs("tr",{className:"hover:bg-gray-200 transition duration-300",children:[e.jsx("td",{className:"py-2 px-4 border-b text-center",children:t.patientName}),e.jsx("td",{className:"py-2 px-4 border-b text-center",children:b(t.date)}),e.jsx("td",{className:"py-2 px-4 border-b text-center",children:t.timeSlot}),e.jsx("td",{className:"py-2 px-4 border-b text-center",children:j(t.doctorId)}),e.jsx("td",{className:"py-2 px-4 border-b text-center",children:t.fee}),e.jsx("td",{className:"py-2 px-4 border-b text-center",children:N(t.doctorId)}),e.jsx("td",{className:"py-2 px-4 border-b text-center",children:e.jsx("button",{className:"bg-green-700 hover:bg-green-600 text-white font-bold py-2 px-4 rounded",onClick:()=>window.location.href=`/appoinmentDetails/${t._id}`,children:"View Details"})})]},t._id))})]})})]})},$=()=>e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsx(w,{})]});export{$ as default};
