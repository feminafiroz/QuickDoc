import{r as c,B as p,j as e}from"./index-BZQwGW2S.js";import{A as b,a as w}from"./Sidebar-GDkqWbod.js";import{a as f}from"./axiosService-D_CQMRTJ.js";/* empty css                      */import{Q as y}from"./react-toastify.esm-Dq6u0WO-.js";import{s as h}from"./toaster-DBZDDvmy.js";import"./index-4jKjJyz1.js";import"./iconBase-9lu4LLBA.js";import"./logo-NL4NpGi6.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";import"./setnget-jfIHgayU.js";import"./clsx-B-dksMZM.js";const N=()=>{const[s,a]=c.useState([]);return c.useEffect(()=>{f.get(p+"/getallreviews").then(t=>{a(t.data.reviews)}).catch(t=>{console.error("Error fetching reviews:",t)})},[]),{reviews:s,setReviews:a}},v=({serialNo:s,review:a,onDelete:t})=>{const[r,l]=c.useState(!1),[i,n]=c.useState(""),x=()=>{i==="delete"&&t(a._id),l(!1)},m=()=>{n("delete"),l(!0)};return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Confirm ",i==="delete"?"delete":"not delete"]}),e.jsxs("p",{className:"mb-4",children:["Are you sure you want to ",i," the review?"]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:()=>l(!1),className:"mr-2 px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),e.jsx("button",{onClick:x,className:"px-4 py-2 bg-green-500 text-white rounded",children:"Confirm"})]})]})}),e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("td",{className:"px-6 py-4 text-left font-medium text-gray-900 whitespace-nowrap dark:text-white truncate",style:{maxWidth:"50px"},children:s}),e.jsx("td",{className:"px-6 py-4 text-left ",children:a.reviewText}),e.jsx("td",{className:"px-6 py-4 text-left",children:e.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-500 text-white rounded",children:"Delete"})})]})]})},$=()=>{const[s,a]=c.useState(1),t=7,{reviews:r,setReviews:l}=N(),i=r.length,n=Math.ceil(i/t),x=r.slice((s-1)*t,s*t),m=()=>{s<n&&a(s+1)},u=()=>{s>1&&a(s-1)},g=d=>{f.delete(`${p}/reviews/remove/${d}`).then(o=>{o.data.success?(h(o.data.message),l(r.filter(j=>j._id!==d))):h(o.data.message)}).catch(()=>{console.error("An error occurred, please try again."),h("Oops! Something went wrong","error")})};return e.jsxs("div",{className:"flex h-screen",children:[e.jsx(b,{}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx(w,{}),e.jsxs("div",{className:"p-6",children:[e.jsx(y,{}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("span",{className:"text-2xl font-bold mb-4 text-center w-full ",children:"Comments"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto w-3/4 mx-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Sl.No"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Comment"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{children:x.map((d,o)=>e.jsx(v,{serialNo:(s-1)*t+o+1,review:d,onDelete:g}))})]})}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx("button",{onClick:u,disabled:s===1,className:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50",children:"Previous"}),e.jsxs("span",{children:["Page ",s," of ",n]}),e.jsx("button",{onClick:m,disabled:s===n,className:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50",children:"Next"})]})]})]})]})};export{$ as default};
