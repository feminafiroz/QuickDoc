import{r as d,U as f,n as C,p as w,j as e,L as F}from"./index-CsBE_jWW.js";import{F as P}from"./Footer-DZsvjz-A.js";import{N as _}from"./navbar-DdDvoLla.js";import{b as k}from"./index-BDDcLPwb.js";import{G as S}from"./iconBase-BdESgyje.js";import{a as x}from"./axiosService-BpkE08CC.js";import{s as p}from"./toaster-IcY2vQtV.js";import{u as R}from"./uploadImages-BvVwZS86.js";import"./index-BUfO-jxn.js";import"./index-Dg-jO3xv.js";import"./logo-NL4NpGi6.js";import"./setnget-jfIHgayU.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";function I(r){return S({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 3a2 2 0 0 1 2-2h13.5a.5.5 0 0 1 0 1H15v2a1 1 0 0 1 1 1v8.5a1.5 1.5 0 0 1-1.5 1.5h-12A2.5 2.5 0 0 1 0 12.5zm1 1.732V12.5A1.5 1.5 0 0 0 2.5 14h12a.5.5 0 0 0 .5-.5V5H2a2 2 0 0 1-1-.268M1 3a1 1 0 0 0 1 1h12V2H2a1 1 0 0 0-1 1"},child:[]}]})(r)}const D=()=>{const[r,o]=d.useState(null),[h,t]=d.useState(null),[a,u]=d.useState({name:"",gender:"",age:null,phoneNumber:"",address:"",dateofbirth:"",marital_status:"single",bloodGroup:"",height:null,weight:null,allergies:"",chronicConditions:"",emergencyContactName:"",emergencyContactRelationship:"",emergencyContactPhoneNumber:"",imageFile:null}),[y,N]=d.useState(null),[j,b]=d.useState(!1);return d.useEffect(()=>{x.get(f+"/profile").then(({data:c})=>{const{user:n}=c;o(n),u(i=>{var l,s;return{...i,name:(n==null?void 0:n.name)||"",gender:(n==null?void 0:n.gender)||"",age:(n==null?void 0:n.age)||null,phoneNumber:(n==null?void 0:n.phoneNumber)||"",address:(n==null?void 0:n.address)||"",dateofbirth:n!=null&&n.dateofbirth?new Date(n.dateofbirth).toISOString().split("T")[0]:"",marital_status:(n==null?void 0:n.marital_status)||"single",bloodGroup:(n==null?void 0:n.bloodGroup)||"",height:(n==null?void 0:n.height)||null,weight:(n==null?void 0:n.weight)||null,allergies:((l=n==null?void 0:n.allergies)==null?void 0:l.join(", "))||"",chronicConditions:((s=n==null?void 0:n.chronicConditions)==null?void 0:s.join(", "))||"",emergencyContactName:(n==null?void 0:n.emergencyContactName)||"",emergencyContactRelationship:(n==null?void 0:n.emergencyContactRelationship)||"",emergencyContactPhoneNumber:(n==null?void 0:n.emergencyContactPhoneNumber)||""}})}).catch(()=>p("Oops! Something went wrong","error"))},[]),{profile:r,formData:a,imagePreview:y,error:h,isSubmitting:j,handleInputChange:c=>{const{name:n,value:i}=c.target;let l="";if(n==="imageFile"){const s=c.target,m=s.files&&s.files[0];if(m){const g=new FileReader;g.onloadend=()=>{N(g.result)},g.readAsDataURL(m),u(v=>({...v,imageFile:m}))}}else{if(n==="name")i.trim()?C.test(i)||(l="First letter must be capital and no leading or trailing space"):l="Name is required";else if(n==="age"){const s=parseInt(i,10);(isNaN(s)||s<0)&&(l="Age must be a positive number")}else if(n==="phoneNumber")i.trim()?w.test(i)||(l="Phone number must have 10 numbers"):l="Phone number is required";else if(n==="dateofbirth"){const s=new Date,m=new Date(i),g=s.getFullYear()-m.getFullYear();m>s?l="Date of birth cannot be in the future":g!==a.age&&(l="Date of birth and age do not match")}u(s=>({...s,[n]:n==="age"?parseInt(i,10):i}))}t(l)},handleSubmit:async()=>{if(!h){b(!0);const c=await R(a.imageFile);x.patch(f+"/profile/edit",{name:a.name,gender:a.gender,age:a.age,phoneNumber:a.phoneNumber,address:a.address,dateofbirth:a.dateofbirth,marital_status:a.marital_status,bloodGroup:a.bloodGroup,height:a.height,weight:a.weight,allergies:a.allergies.split(", ").map(n=>n.trim()),chronicConditions:a.chronicConditions.split(", ").map(n=>n.trim()),emergencyContactName:a.emergencyContactName,emergencyContactRelationship:a.emergencyContactRelationship,emergencyContactPhoneNumber:a.emergencyContactPhoneNumber,profilePicture:c||(r==null?void 0:r.profilePicture)}).then(({data:n})=>{p(n.message),b(!1)}).catch(()=>{b(!1),p("Oops! Something went wrong while updating profile","error")})}}}},E=()=>{const{profile:r,formData:o,imagePreview:h,handleInputChange:t,handleSubmit:a}=D();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-gray-100 min-h-screen",children:e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsx("h2",{className:"text-4xl font-bold text-center text-green-700 mb-6",children:"Profile"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 w-3/4 mx-auto flex flex-col items-center",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("img",{src:h||(r==null?void 0:r.profilePicture)||"https://picsum.photos/200/",alt:"Profile",className:"w-40 h-40 rounded-full mx-auto mb-4"}),e.jsxs("label",{htmlFor:"profile-image",className:"absolute bottom-0 right-0 transform translate-x-1/2 bg-green-700 text-white rounded-full p-2 cursor-pointer mr-10",children:[e.jsx("input",{type:"file",id:"profile-image",name:"imageFile",className:"hidden",onChange:t}),e.jsx(k,{className:"h-5 w-5"})]})]}),e.jsxs("div",{className:"mb-4 pt-5",children:[e.jsxs("div",{className:"pb-7",children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 font-semibold",children:"Name:"}),e.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-semibold",children:"Email:"}),e.jsx("input",{type:"email",id:"email",name:"email",value:(r==null?void 0:r.email)||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),e.jsxs("div",{className:"mb-4 lg:pt-20 lg:mt-7",children:[e.jsx("label",{htmlFor:"phone",className:"block text-gray-700 font-semibold",children:"Phone:"}),e.jsx("input",{type:"tel",id:"phone",name:"phoneNumber",value:o.phoneNumber||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"address",className:"block text-gray-700 font-semibold",children:"Address:"}),e.jsx("input",{type:"text",id:"address",name:"address",value:o.address||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"age",className:"block text-gray-700 font-semibold",children:"Age:"}),e.jsx("input",{type:"number",id:"age",name:"age",value:o.age||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"dob",className:"block text-gray-700 font-semibold",children:"DOB:"}),e.jsx("input",{type:"date",id:"dob",name:"dateofbirth",value:o.dateofbirth||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"gender",className:"block text-gray-700 font-semibold",children:"Gender:"}),e.jsxs("select",{id:"gender",name:"gender",value:o.gender||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"others",children:"Others"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"marital_status",className:"block text-gray-700 font-semibold",children:"Marital Status:"}),e.jsxs("select",{id:"marital_status",name:"marital_status",value:o.marital_status||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"single",children:"Single"}),e.jsx("option",{value:"married",children:"Married"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"allergies",className:"block text-gray-700 font-semibold",children:"Allergies:"}),e.jsx("input",{type:"text",id:"allergies",name:"allergies",value:o.allergies||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"chronic_conditions",className:"block text-gray-700 font-semibold",children:"Chronic Conditions:"}),e.jsx("input",{type:"text",id:"chronic_conditions",name:"chronicConditions",value:o.chronicConditions||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"height",className:"block text-gray-700 font-semibold",children:"Height (cm):"}),e.jsx("input",{type:"number",id:"height",name:"height",value:o.height||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"weight",className:"block text-gray-700 font-semibold",children:"Weight (kg):"}),e.jsx("input",{type:"number",id:"weight",name:"weight",value:o.weight||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"emergency_contact_name",className:"block text-gray-700 font-semibold",children:"Emergency Contact Name:"}),e.jsx("input",{type:"text",id:"emergency_contact_name",name:"emergencyContactName",value:o.emergencyContactName||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"emergency_contact_relationship",className:"block text-gray-700 font-semibold",children:"Emergency Contact Relationship:"}),e.jsx("input",{type:"text",id:"emergency_contact_relationship",name:"emergencyContactRelationship",value:o.emergencyContactRelationship||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"emergency_contact_phone",className:"block text-gray-700 font-semibold",children:"Emergency Contact Phone:"}),e.jsx("input",{type:"tel",id:"emergency_contact_phone",name:"emergencyContactPhoneNumber",value:o.emergencyContactPhoneNumber||"",onChange:t,className:"w-full border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),e.jsx("button",{type:"submit",className:"mt-6 w-full bg-green-700 text-white rounded-md py-2 hover:bg-green-600 transition duration-300 px-10",onClick:a,children:"Update Profile"})]}),e.jsx(F,{to:"/user/wallet",className:"fixed bottom-8 right-8 bg-green-900 text-white rounded-full p-4 shadow-lg hover:bg-green-800",children:e.jsx(I,{className:"h-7 w-7"})})]})})})},Q=()=>e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx(E,{}),e.jsx(P,{})]});export{Q as default};
