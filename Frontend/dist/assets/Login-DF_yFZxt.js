import{r as g,u as S,a as _,U as h,s as p,j as e,L as f,G as L}from"./index-00cI4IgE.js";import{u as F}from"./formik.esm-_0XhHOXL.js";import{a as b}from"./axios-B6xwUs71.js";import{s as l}from"./toaster-KRpCf2CE.js";import{a as E}from"./validation-DCmD-k1e.js";import{j as I}from"./index-VWaDGczM.js";import{s as i}from"./setnget-jfIHgayU.js";import{i as P}from"./login_img_1-DGsDYkFd.js";import{F as A,f as D,a as G}from"./index-Ba2VAfL3.js";import"./index-D-igGuhj.js";const U=()=>{const[j,d]=g.useState(!1),[n,w]=g.useState(!1),u=S(),x=_(),s=F({initialValues:{email:"",password:""},validate:E,onSubmit:({email:o,password:r})=>{d(!0),b.post(h+"/login",{email:o,password:r}).then(({data:a})=>{const{name:t,role:c,_id:m}=a.user,{message:N,access_token:v,refresh_token:k}=a;i("access_token",v),i("refresh_token",k),l(N,"success"),x(p({isAuthenticated:!0,name:t,role:c,id:m})),u("/")}).catch(({response:a})=>{const{message:t}=a.data;d(!1),l(t,"error")})}}),y=o=>{b.post(h+"/google_signIn",{user:o}).then(({data:r})=>{const{message:a,user:t,access_token:c,refresh_token:m}=r;console.log(r),i("access_token",c),i("refresh_token",m),l(a,"success"),x(p({name:t.name,isAuthenticated:!0,role:t.role,id:t._id})),u("/")}).catch(({response:r})=>l(r.data.message,"error"))};return e.jsx("div",{className:"flex items-center justify-center h-screen bg-cover bg-center",style:{backgroundImage:`url(${P})`},children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"w-96 p-8 bg-gray-100 bg-opacity-50 rounded-xl shadow-lg ml-8",children:[e.jsx("h2",{className:"font-bold text-black-400 text-3xl mb-4 ml-28",children:"Login"}),e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 mr-64",children:"Email:"}),e.jsx("input",{type:"text",id:"email",className:"w-full md:px-10 border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:border-green-500",...s.getFieldProps("email")}),s.errors.email&&s.touched.email&&e.jsx("div",{className:"text-red-500",children:s.errors.email})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"block text-gray-700 mr-64",children:"Password:"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:n?"text":"password",id:"password",className:"w-full md:px-10 border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:border-green-500",...s.getFieldProps("password")}),e.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:()=>w(!n),children:e.jsx(A,{icon:n?D:G,className:"text-gray-700"})})]}),s.errors.password&&s.touched.password&&e.jsx("div",{className:"text-red-500",children:s.errors.password}),e.jsx(f,{to:"/user/forgot_password",className:"text-gray-500 hover:underline block ml-48",children:"Forgot Password?"})]}),e.jsx("button",{type:"submit",className:"bg-green-700 hover:bg-green-600 text-white font-bold py-2 px-6 mt-4 rounded-lg focus:outline-none focus:shadow-outline ml-28",disabled:!!j,children:"Login"})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-700 ml-24",children:"Don,t have an account?"}),e.jsx(f,{to:"/user/register",className:"text-blue-500 mt-2 text-sm ml-28 underline",children:"Create Account"}),e.jsx("div",{className:"px-4 py-2 w-full flex justify-center gap-2",children:e.jsx(L,{onSuccess:o=>{const r=I(o==null?void 0:o.credential);y(r)},onError:()=>{l("Login Failed","error")}})})]})})})},M=()=>e.jsx(U,{});export{M as default};
