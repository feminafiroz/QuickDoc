import{r as n,j as e,B as u,I as f}from"./index-00cI4IgE.js";import{c as y,A as j,a as w}from"./Sidebar-DNM2UuCz.js";import{u as N}from"./formik.esm-_0XhHOXL.js";import{G as v}from"./iconBase-CrgXBa7-.js";import{a as g}from"./axiosService-vpQesCrw.js";import{s as p}from"./toaster-KRpCf2CE.js";/* empty css                      */import"./index-B94mGQ6v.js";import"./logo-NL4NpGi6.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";import"./setnget-jfIHgayU.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=y("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function C(a){return v({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(a)}const S=({_id:a,image:c,isActive:l,index:i,handleDeleteImg:m})=>{const[r,x]=n.useState(l),s=()=>{x(!r),g.patch(u+`/banners/edit/${a}?isActive=${!r}`).catch(t=>console.log(t))};return e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:i}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("img",{src:c,alt:`Banner ${i}`,className:"w-20 h-20 object-cover rounded-md"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("label",{className:"flex cursor-pointer select-none items-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:s,className:"sr-only"}),e.jsx("div",{className:`box block h-6 w-10 rounded-full ${r?"bg-green-500":"bg-red-500"}`}),e.jsx("div",{className:`absolute left-1 top-1 flex h-4 w-4 items-center justify-center rounded-full bg-white transition ${r?"translate-x-full":""}`})]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{className:"p-1 rounded-md bg-red-400 text-white font-semibold hover:bg-red-500 transition duration-150",onClick:()=>m(a),children:e.jsx(k,{})})})]})},A=n.createContext(null),U=({uwConfig:a,setImageUrl:c})=>{const[l,i]=n.useState(!1),[m,r]=n.useState(!1);n.useEffect(()=>{if(!l)if(document.getElementById("uw"))i(!0);else{const t=document.createElement("script");t.setAttribute("async",""),t.setAttribute("id","uw"),t.src="https://upload-widget.cloudinary.com/global/all.js",t.addEventListener("load",()=>i(!0)),document.body.appendChild(t)}},[l]);const x=async()=>{r(!0);const s=window.cloudinary.createUploadWidget(a,(t,o)=>{!t&&o&&o.event==="success"&&c(o.info.secure_url)});l&&(await s.open(),r(!1))};return e.jsx(A.Provider,{value:{loaded:l},children:e.jsx("button",{id:"upload_widget",className:"bg-blue-500 py-1 px-4 disabled:cursor-not-allowed rounded-md text-white font-semibold shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400",type:"button",onClick:x,disabled:m,children:"Upload"})})},I=({handleButtonclick:a,label:c,isDisabled:l,className:i,buttontype:m})=>e.jsx("button",{className:`py-2 px-5 rounded-md text-white font-semibold transition duration-150 ${i}`,onClick:a,disabled:l??!1,type:`${m??"button"}`,children:c}),B=({setModalOpen:a,handleAddedBanner:c})=>{const[l,i]=n.useState(""),[m,r]=n.useState(!1),s=N({initialValues:{title:"",description:"",advertisementUrl:"",image:""},validate:t=>{const o={};return t.title||(o.title="Title is required"),t.description||(o.description="Description is required"),t.advertisementUrl||(o.advertisementUrl="Advertisement URL is required"),o},onSubmit:t=>{r(!0),t.image=l,g.post(u+"/banners/add",t).then(({data:o})=>{c(o.newBanner),a(!1)}).catch(()=>p("Oops! Something went wrong","error")).finally(()=>r(!1))}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-gray-500 bg-opacity-50 flex justify-center items-center",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg max-w-md w-full mx-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add Advertisement"}),e.jsx("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto flex justify-center items-center",onClick:()=>a(!1),children:e.jsx(C,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-4 md:p-5",children:e.jsxs("form",{className:"grid grid-cols-2 gap-4 mb-4",onSubmit:s.handleSubmit,children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Title"}),e.jsx("input",{type:"text",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg outline-none block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",...s.getFieldProps("title")}),s.errors.title&&e.jsx("p",{className:"col-span-2 mt-1 text-red-500",children:s.errors.title})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"description",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Description"}),e.jsx("textarea",{rows:1,className:"bg-gray-50 border border-gray-300 outline-none text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",...s.getFieldProps("description")}),s.errors.description&&e.jsx("p",{className:"col-span-2 mt-1 text-red-500",children:s.errors.description})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"advertisementUrl",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Advertisement URL"}),e.jsx("input",{type:"text",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg outline-none block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",...s.getFieldProps("advertisementUrl")}),s.errors.advertisementUrl&&e.jsx("p",{className:"col-span-2 mt-1 text-red-500",children:s.errors.advertisementUrl})]}),e.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:"Upload images"}),e.jsx(U,{uwConfig:f,setImageUrl:i}),l&&e.jsx("img",{src:l,alt:"image preview",width:100,height:100})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("button",{type:"submit",className:"text-white w-full disabled:cursor-wait bg-green-500 hover:bg-green-600 focus:ring-green-400 focus:ring-2 focus:outline-none font-medium rounded-lg text-sm px-5 py-2 text-center",disabled:m,children:"Submit"})})]})})]})})})},D=()=>{const[a,c]=n.useState([]),[l,i]=n.useState(!1),[m,r]=n.useState(!1),[x,s]=n.useState(null);n.useEffect(()=>{g.get(u+"/banners").then(({data:d})=>c(d.banners)).catch(()=>p("Oops! Something went wrong","error"))},[]);const t=d=>{s(d),r(!0)},o=()=>{x&&g.delete(u+`/banners/remove/${x}`).then(({data:d})=>{p(d.message),c(a.filter(h=>h._id!==x))}).catch(d=>console.log(d)),r(!1)},b=d=>{c(h=>[...h,d])};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center my-2",children:[e.jsx("div",{className:"justify-center flex items-center",children:e.jsx("h1",{className:"mb-2 text-xl font-semibold mt-2  text-center",children:"Advertisement"})}),e.jsx(I,{label:"Add",className:"bg-green-800 hover:bg-green-700",handleButtonclick:()=>i(!0)})]}),a.length?e.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg custom-vh",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"SL:no"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Image"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),e.jsx("tbody",{children:a.map((d,h)=>n.createElement(S,{...d,key:d._id,index:h+1,handleDeleteImg:t}))})]})}):e.jsx("h1",{className:"flex justify-center items-center text-xl font-bold",children:"No banners"}),l&&e.jsx(B,{setModalOpen:i,handleAddedBanner:b}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"mb-4",children:"Are you sure you want to delete this Advertisement?"}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:()=>r(!1),className:"mr-2 px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),e.jsx("button",{onClick:o,className:"px-4 py-2 bg-red-500 text-white rounded",children:"Confirm"})]})]})})]})},q=()=>e.jsxs("div",{className:"flex h-screen",children:[e.jsx(j,{}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx(w,{}),e.jsx("div",{className:"p-6 px-20",children:e.jsx(D,{})})]})]});export{q as default};
